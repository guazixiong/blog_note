# 摘录-如何才能产生一篇优秀的文档

> 摘自人月神话(二十周年纪念版)  章节 The other face

[TOC]

## 为什么要输出文档

​		每个用户都需要一段对程序进行描述的文字。可是大多数文档只提供了很少的总结性内容，无法达到用户要求，就像是描绘了树木，形容了树叶，但却没有一副森林的图案。为了得到一份有用的文字描述，就必须放慢脚步，稳妥地进行。

​		不同用户需要不同级别的文档。某些用户仅仅偶尔使用程序，有些用户必须依赖程序，还有一些用户必须根据环境和目的的变动对程序进行修改。

## 文档应描述什么?

1. 目的。主要的功能是什么？开发程序的原因是什么？

2. 环境。程序运行在什么样的机器、硬件配置和操作系统上？

3. 范围。输入的有效范围是什么？允许显示的合法范围是什么？

4. 实现功能和使用的算法。精确地阐述它做了什么。

5. 输入－输出格式。必须是确切和完整的。

6. 操作指令。包括控制台及输出内容中正常和异常结束的行为。

7. 选项。用户的功能选项有哪些？如何在选项之间进行挑选？

8. 运行时间。在指定的配置下，解决特定规模问题所需要的时间？

9. 精度和校验。期望结果的精确程度？如何进行精度的检测？

## 文档的书写时间?

​		一般来说，三、四页纸常常就可以容纳以上所有的信息。不过往往需要特别注意的是表达的简洁和精确。由于它包含了和软件相关的基本决策，所以这份文档的绝大部分需要在程序编制之前书写。

## 如何验证程序(如何构造测试用例)?

​		除了程序的使用方法，还必须附带一些程序正确运行的证明，即测试用例。

​		每一份发布的程序拷贝应该包括一些可以例行运行的小测试用例，为用户提供信心--他拥有了一份可信赖的拷贝，并且正确地安装到了机器上。

​		然后，需要得到更加全面的测试用例，在程序修改之后，进行常规运行。这些用例可以根据输入数据的范围划分成三个部分。

1. 针对遇到的大多数常规数据和程序主要功能进行测试的用例。它们是测试用例的主要组成部分。

2. 数量相对较少的合法数据测试用例，对输入数据范围边界进行检查，确保最大可能值、最小可能值和其他有效特殊数据可以正常工作。

3. 数量相对较少的非法数据测试用例，在边界外检查数据范围边界，确保无效的输入能有正确的数据诊断提示。

## 如何修改程序?

​		和一般用户一样，修改者迫切需要一份清晰明了的概述，不过这一次是关于系统的内部结构。那么这份概述的组成部分是什么呢？

1. 流程图或子系统的结构图，对此以下有更详细的论述。

2. 对所用算法的完整描述，或者是对文档中类似描述的引用。

3. 对所有文件规划的解释。

4. 数据流的概要描述--从磁盘或者磁带中，获取数据或程序处理的序列--以及在每个处理过程完成的操作。

5. 初始设计中，对已预见修改的讨论；特性、功能回调的位置以及出口；

​		原作者对可能会扩充的地方以及可能处理方案的一些意见。另外，对隐藏缺陷的观察也同样很有价值。

### 流程图

​		流程图是被吹捧得最过分的一种程序文档。事实上，很多程序甚至不需要流程图，很少有程序需要一页纸以上的流程图。

​		流程图显示了程序的流程判断结构，它仅仅是程序结构的一个方面。当流程图绘制在一张图上时，它能非常优雅地显示程序的判断流向，但**当它被分成几张时，也就是说需要采用经过编号的出口和连接符来进行拼装时，整体结构的概观就严重地被破坏了**。

​		因此，一页纸的流程图，成为表达程序结构、阶段或步骤的一种非常基本的图示。同样，它也非常容易绘制

![image-20231119114556193](%E6%91%98%E5%BD%95-%E5%A6%82%E4%BD%95%E6%89%8D%E8%83%BD%E4%BA%A7%E7%94%9F%E4%B8%80%E7%AF%87%E4%BC%98%E7%A7%80%E7%9A%84%E6%96%87%E6%A1%A3.assets/image-20231119114556193.png)

​		因此，逐一记录的详细流程图过时而且令人生厌，它只适合启蒙初学者的算法思维

​		现实中，流程图被鼓吹的程度远大于它们的实际作用。我从来没有看到过一个有经验的编程人员，在开始编写程序之前，会例行公事地绘制详尽的流程图。在一些要求流程图的组织中，流程图总是事后才补上

### 自文档化(文档合并)

​		保证编程用户能方便、即时地得到文档资料。这种程序被称为自文档化（self-documenting）。

### 格式

1. 借助那些出于语言的要求而必须存在的语句，来附加尽可能多的"文档"信息。因此，标签、声明语句、符号名称均可以作为工具，用来向读者表达尽可能多的意思
2. 尽可能地使用空格和一致的格式提高程序的可读性，表现从属和嵌套关系。
3. 以段落注释的形式，向程序中插入必要的记叙性文字。大多数文档一般都包括足够多的逐行注释，特别是那些满足公司呆板的"良好文档"规范的程序，通常就包含了很多注释。即使是这些程序，在段落注释方面也常常是不够的，而段落注释能提供总体把握和真正加深读者对整件事情的理解。

### 程序注释

1. 使用包含版本号和能帮助记忆的程序名称。即，假设程序将会有很多版本。例子中使用的是1967年的最低一位数字。
2. 在过程（PROCEDURE）的注释中，包含记叙性的描述文字。
3. 尽可能为基本算法提供参考引用，通常它会指向更完备的处理方法。这样，既节省了空间，同时还允许那些有经验的读者能非常自信地略过这一段内容
4. 显示和算法书籍中的传统算法的关系 a) 更改 b) 定制细化 c) 重新表达
5. 声明所有的变量。采用助记符，并使用注释把DECLARE转化成完整的说明。注意，声明已经包含了名称和结构性描述，需要增加的仅仅是对目的的解释。通过这种方式，可以避免在不同的处理中重复名称和结构性的描述。
6. 用标签标记出初始化的位置。
7. 对程序语句进行分组和标记，以显示与设计文档中语句单元的一致性。
8. 利用缩进表现结构和分组。
9. 在程序列表中，手工添加逻辑箭头。它们对调试和变更非常有帮助。它们还可以补充在页面右边的空白处（注释区域），成为机器可读文字的一部分。
10. 使用行注释来解释任何不很清楚的事情。如果采用了上述技术，那么注释的长度和数量都将小于传统惯例。
11. 把多条语句放置在一行，或者把一条语句拆放在若干行，以吻合逻辑思维，表示和其他算法描述一致。